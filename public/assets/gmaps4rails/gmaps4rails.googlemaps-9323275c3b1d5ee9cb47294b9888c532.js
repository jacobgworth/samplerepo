(function(){var e=function(e,r){function o(){this.constructor=e}for(var i in r)t.call(r,i)&&(e[i]=r[i]);return o.prototype=r.prototype,e.prototype=new o,e.__super__=r.prototype,e},t={}.hasOwnProperty;this.Gmaps4RailsGoogle=function(t){function r(){r.__super__.constructor.apply(this,arguments),this.map_options={disableDefaultUI:!1,disableDoubleClickZoom:!1,type:"ROADMAP"},this.markers_conf={clusterer_gridSize:50,clusterer_maxZoom:5,custom_cluster_pictures:null,custom_infowindow_class:null},this.mergeWithDefault("map_options"),this.mergeWithDefault("markers_conf"),this.kml_options={clickable:!0,preserveViewport:!1,suppressInfoWindows:!1},this.polygons_conf={strokeColor:"#FFAA00",strokeOpacity:.8,strokeWeight:2,fillColor:"#000000",fillOpacity:.35,clickable:!1},this.polylines_conf={strokeColor:"#FF0000",strokeOpacity:1,strokeWeight:2,clickable:!1,zIndex:null},this.circles_conf={fillColor:"#00AAFF",fillOpacity:.35,strokeColor:"#FFAA00",strokeOpacity:.8,strokeWeight:2,clickable:!1,zIndex:null},this.direction_conf={panel_id:null,display_panel:!1,origin:null,destination:null,waypoints:[],optimizeWaypoints:!1,unitSystem:"METRIC",avoidHighways:!1,avoidTolls:!1,region:null,travelMode:"DRIVING"}}return e(r,t),r.prototype.createPoint=function(e,t){return new google.maps.Point(e,t)},r.prototype.createLatLng=function(e,t){return new google.maps.LatLng(e,t)},r.prototype.createLatLngBounds=function(){return new google.maps.LatLngBounds},r.prototype.createMap=function(){var e,t;return e={maxZoom:this.map_options.maxZoom,minZoom:this.map_options.minZoom,zoom:this.map_options.zoom,center:this.createLatLng(this.map_options.center_latitude,this.map_options.center_longitude),mapTypeId:google.maps.MapTypeId[this.map_options.type],mapTypeControl:this.map_options.mapTypeControl,disableDefaultUI:this.map_options.disableDefaultUI,disableDoubleClickZoom:this.map_options.disableDoubleClickZoom,draggable:this.map_options.draggable},t=this.mergeObjectWithDefault(this.map_options.raw,e),new google.maps.Map(document.getElementById(this.map_options.id),t)},r.prototype.createMarkerImage=function(e,t,r,o,i){return new google.maps.MarkerImage(e,t,r,o,i)},r.prototype.createSize=function(e,t){return new google.maps.Size(e,t)},r.prototype.createMarker=function(e){var t,r,o,i,n,s,a;return i=this.createLatLng(e.Lat,e.Lng),""===e.marker_picture&&null===e.rich_marker?(t={position:i,map:this.serviceObject,title:e.marker_title,draggable:e.marker_draggable,zIndex:e.zindex},n=this.mergeObjectWithDefault(this.markers_conf.raw,t),new google.maps.Marker(n)):null!==e.rich_marker?new RichMarker({position:i,map:this.serviceObject,draggable:e.marker_draggable,content:e.rich_marker,flat:null===e.marker_anchor?!1:e.marker_anchor[1],anchor:null===e.marker_anchor?0:e.marker_anchor[0],zIndex:e.zindex}):(r=this.createImageAnchorPosition(e.marker_anchor),s=this.createImageAnchorPosition(e.shadow_anchor),o=this.createOrRetrieveImage(e.marker_picture,e.marker_width,e.marker_height,r),a=this.createOrRetrieveImage(e.shadow_picture,e.shadow_width,e.shadow_height,s),t={position:i,map:this.serviceObject,icon:o,title:e.marker_title,draggable:e.marker_draggable,shadow:a,zIndex:e.zindex},n=this.mergeObjectWithDefault(this.markers_conf.raw,t),new google.maps.Marker(n))},r.prototype.includeMarkerImage=function(e,t){var r,o,i,n;for(r=i=0,n=e.length;n>i;r=++i)if(o=e[r],o.url===t)return r;return!1},r.prototype.createOrRetrieveImage=function(e,t,r,o){var i,n;if(""===e||null===e)return null;switch(n=this.includeMarkerImage(this.markerImages,e)){case!1:return i=this.createMarkerImage(e,this.createSize(t,r),null,o,null),this.markerImages.push(i),i;default:return"number"==typeof n?this.markerImages[n]:!1}},r.prototype.clearMarkers=function(){var e,t,r,o,i;for(o=this.markers,i=[],t=0,r=o.length;r>t;t++)e=o[t],i.push(this.clearMarker(e));return i},r.prototype.showMarkers=function(){var e,t,r,o,i;for(o=this.markers,i=[],t=0,r=o.length;r>t;t++)e=o[t],i.push(this.showMarker(e));return i},r.prototype.hideMarkers=function(){var e,t,r,o,i;for(o=this.markers,i=[],t=0,r=o.length;r>t;t++)e=o[t],i.push(this.hideMarker(e));return i},r.prototype.clearMarker=function(e){return e.serviceObject.setMap(null)},r.prototype.showMarker=function(e){return e.serviceObject.setVisible(!0)},r.prototype.hideMarker=function(e){return e.serviceObject.setVisible(!1)},r.prototype.extendBoundsWithMarkers=function(){var e,t,r,o,i;for(o=this.markers,i=[],t=0,r=o.length;r>t;t++)e=o[t],i.push(this.boundsObject.extend(e.serviceObject.position));return i},r.prototype.createClusterer=function(e){return new MarkerClusterer(this.serviceObject,e,{maxZoom:this.markers_conf.clusterer_maxZoom,gridSize:this.markers_conf.clusterer_gridSize,styles:this.customClusterer()})},r.prototype.clearClusterer=function(){return this.markerClusterer.clearMarkers()},r.prototype.clusterize=function(){var e,t,r,o,i;if(this.markers_conf.do_clustering===!0){for(null!==this.markerClusterer&&this.clearClusterer(),t=new Array,i=this.markers,r=0,o=i.length;o>r;r++)e=i[r],t.push(e.serviceObject);return this.markerClusterer=this.createClusterer(t)}},r.prototype.createInfoWindow=function(e){var t,r;return"function"==typeof this.jsTemplate||null!=e.description?("function"==typeof this.jsTemplate&&(e.description=this.jsTemplate(e)),null!==this.markers_conf.custom_infowindow_class?(t=document.createElement("div"),t.setAttribute("class",this.markers_conf.custom_infowindow_class),t.innerHTML=e.description,e.infowindow=new InfoBox(this.infobox(t)),r=this,google.maps.event.addListener(e.serviceObject,"click",this.openInfoWindow(r,e.infowindow,e.serviceObject))):(e.infowindow=new google.maps.InfoWindow({content:e.description}),r=this,google.maps.event.addListener(e.serviceObject,"click",this.openInfoWindow(r,e.infowindow,e.serviceObject)))):void 0},r.prototype.openInfoWindow=function(e,t,r){return function(){return null!==e.visibleInfoWindow&&e.visibleInfoWindow.close(),t.open(e.serviceObject,r),e.visibleInfoWindow=t}},r.prototype.createKmlLayer=function(e){var t;return t=e.options||{},t=this.mergeObjectWithDefault(t,this.kml_options),e=new google.maps.KmlLayer(e.url,t),e.setMap(this.serviceObject),e},r.prototype.fitBounds=function(){return this.boundsObject.isEmpty()?void 0:this.serviceObject.fitBounds(this.boundsObject)},r.prototype.centerMapOnUser=function(){return this.serviceObject.setCenter(this.userLocation)},r}(Gmaps4Rails)}).call(this);