(function(){var t=function(t,r){function o(){this.constructor=t}for(var i in r)e.call(r,i)&&(t[i]=r[i]);return o.prototype=r.prototype,t.prototype=new o,t.__super__=r.prototype,t},e={}.hasOwnProperty;this.Gmaps4RailsBing=function(e){function r(){r.__super__.constructor.apply(this,arguments),this.map_options={type:"road"},this.markers_conf={infobox:"description"},this.mergeWithDefault("map_options"),this.mergeWithDefault("markers_conf")}return t(r,e),r.prototype.getMapType=function(){switch(this.map_options.type){case"road":return Microsoft.Maps.MapTypeId.road;case"aerial":return Microsoft.Maps.MapTypeId.aerial;case"auto":return Microsoft.Maps.MapTypeId.auto;case"birdseye":return Microsoft.Maps.MapTypeId.birdseye;case"collinsBart":return Microsoft.Maps.MapTypeId.collinsBart;case"mercator":return Microsoft.Maps.MapTypeId.mercator;case"ordnanceSurvey":return Microsoft.Maps.MapTypeId.ordnanceSurvey;default:return Microsoft.Maps.MapTypeId.auto}},r.prototype.createPoint=function(t,e){return new Microsoft.Maps.Point(t,e)},r.prototype.createLatLng=function(t,e){return new Microsoft.Maps.Location(t,e)},r.prototype.createLatLngBounds=function(){},r.prototype.createMap=function(){return new Microsoft.Maps.Map(document.getElementById(this.map_options.id),{credentials:this.map_options.provider_key,mapTypeId:this.getMapType(),center:this.createLatLng(this.map_options.center_latitude,this.map_options.center_longitude),zoom:this.map_options.zoom})},r.prototype.createSize=function(t,e){return new google.maps.Size(t,e)},r.prototype.createMarker=function(t){var e,r;return r=this.createLatLng(t.Lat,t.Lng),e=""===t.marker_picture?new Microsoft.Maps.Pushpin(this.createLatLng(t.Lat,t.Lng),{draggable:t.marker_draggable,anchor:this.createImageAnchorPosition(t.Lat,t.Lng),text:t.marker_title}):new Microsoft.Maps.Pushpin(this.createLatLng(t.Lat,t.Lng),{draggable:t.marker_draggable,anchor:this.createImageAnchorPosition(t.Lat,t.Lng),icon:t.marker_picture,height:t.marker_height,text:t.marker_title,width:t.marker_width}),this.addToMap(e),e},r.prototype.clearMarkers=function(){var t,e,r,o,i;for(o=this.markers,i=[],e=0,r=o.length;r>e;e++)t=o[e],i.push(this.clearMarker(t));return i},r.prototype.clearMarker=function(t){return this.removeFromMap(t.serviceObject)},r.prototype.showMarkers=function(){var t,e,r,o,i;for(o=this.markers,i=[],e=0,r=o.length;r>e;e++)t=o[e],i.push(this.showMarker(t));return i},r.prototype.showMarker=function(t){return t.serviceObject.setOptions({visible:!0})},r.prototype.hideMarkers=function(){var t,e,r,o,i;for(o=this.markers,i=[],e=0,r=o.length;r>e;e++)t=o[e],i.push(this.hideMarker(t));return i},r.prototype.hideMarker=function(t){return t.serviceObject.setOptions({visible:!1})},r.prototype.extendBoundsWithMarkers=function(){var t,e,r,o,i;for(t=[],i=this.markers,r=0,o=i.length;o>r;r++)e=i[r],t.push(e.serviceObject.getLocation());return this.boundsObject=Microsoft.Maps.LocationRect.fromLocations(t)},r.prototype.createClusterer=function(){},r.prototype.clearClusterer=function(){},r.prototype.clusterize=function(){},r.prototype.createInfoWindow=function(t){var e;return null!=t.description?(t.info_window="description"===this.markers_conf.infobox?new Microsoft.Maps.Infobox(t.serviceObject.getLocation(),{description:t.description,visible:!1,showCloseButton:!0}):new Microsoft.Maps.Infobox(t.serviceObject.getLocation(),{htmlContent:t.description,visible:!1}),e=this,Microsoft.Maps.Events.addHandler(t.serviceObject,"click",this.openInfoWindow(e,t.info_window)),this.addToMap(t.info_window)):void 0},r.prototype.openInfoWindow=function(t,e){return function(){return t.visibleInfoWindow&&t.visibleInfoWindow.setOptions({visible:!1}),e.setOptions({visible:!0}),t.visibleInfoWindow=e}},r.prototype.fitBounds=function(){return this.serviceObject.setView({bounds:this.boundsObject})},r.prototype.addToMap=function(t){return this.serviceObject.entities.push(t)},r.prototype.removeFromMap=function(t){return this.serviceObject.entities.remove(t)},r.prototype.centerMapOnUser=function(){return this.serviceObject.setView({center:this.userLocation})},r}(Gmaps4Rails)}).call(this);